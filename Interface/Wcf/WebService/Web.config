<?xml version="1.0" encoding="utf-8"?>
<configuration>

  <configSections>
    <section name="CiccioGest" type="CiccioGest.Infrastructure.Conf.AppConfig.ConfigurationSection, Infrastructure" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
  </configSections>
  <CiccioGest>
    <Confs default="mysql">
      <Conf name="mysql" data_access="NHibernate" database="MySql" cs="server=localhost;User Id=CiccioGestNhb;password=CiccioGestNhb;database=CiccioGestNhb" />
      <Conf name="ssee1" data_access="NHibernate" database="SSEE" cs="Data Source=CICCIOBOOK\SQLEXPRESS;Initial Catalog=CiccioGest;Integrated Security=True" />
      <Conf name="ssee2" data_access="NHibernate" database="SSEE" cs="Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\DddTest.mdf;Integrated Security=True" />
      <Conf name="sqlite" data_access="NHibernate" database="SQLite" cs="Data Source=CiccioGestNhb.db" />
      <Conf name="db4o" data_access="Db4o" database="MySql" cs="DddTest.db4o" />
    </Confs>
  </CiccioGest>
  <log4net>
    <appender name="remote" type="log4net.Appender.UdpAppender">
      <RemoteAddress value="127.0.0.1" />
      <RemotePort value="9998" />
      <layout type="log4net.Layout.XmlLayout" />
    </appender>
    <root>
      <appender-ref ref="remote" />
    </root>
  </log4net>
  <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <targets>
      <target xsi:type="NLogViewer" name="remote" onOverflow="Split" address="udp://127.0.0.1:9999" includeSourceInfo="true" includeCallSite="true" includeNdc="true" includeNLogData="true" includeMdc="true" />
      <target xsi:type="Debugger" name="vsd" />
      <target xsi:type="File" name="file" fileName="log.txt" />
    </targets>
    <rules>
      <logger name="*" minlevel="Debug" writeTo="remote" />
    </rules>
  </nlog>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.7.2" />
    <httpRuntime targetFramework="4.7.2" />
  </system.web>

  <system.serviceModel>

    <!--<services>
      <service name="CiccioGest.Interface.Wcf.WebService.Service1" behaviorConfiguration="MyServiceBehavior">
        <endpoint binding="basicHttpBinding" bindingConfiguration="MyBinding" contract="CiccioGest.Interface.Wcf.WebService.IService1" />
      </service>
    </services>-->

    <!--<bindings>
      <basicHttpBinding>
        <binding name="MyBinding" />
      </basicHttpBinding>
    </bindings>-->

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- Per evitare la diffusione di informazioni sui metadati, impostare i valori seguenti su false prima della distribuzione -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <!-- Per ricevere i dettagli sull'eccezione per scopi di debug in caso di guasti, impostare il valore riportato sotto su true. Impostarlo su false prima della distribuzione per evitare di diffondere informazioni sull'eccezione -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <!-- Per sfogliare la directory radice dell'applicazione Web durante il debug, impostare il valore riportato sotto su true.
         Impostarlo su false prima della distribuzione per evitare di diffondere informazioni sulla cartella dell'applicazione Web. -->
    <directoryBrowse enabled="true" />
  </system.webServer>

  <runtime>

    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

      <dependentAssembly>

        <assemblyIdentity name="Google.Protobuf" publicKeyToken="a7d26565bac4d604" culture="neutral" />

        <bindingRedirect oldVersion="0.0.0.0-3.11.2.0" newVersion="3.11.2.0" />

      </dependentAssembly>

      <dependentAssembly>

        <assemblyIdentity name="BouncyCastle.Crypto" publicKeyToken="0e99375e54769942" culture="neutral" />

        <bindingRedirect oldVersion="0.0.0.0-1.8.5.0" newVersion="1.8.5.0" />

      </dependentAssembly>

      <dependentAssembly>

        <assemblyIdentity name="System.Numerics.Vectors" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />

        <bindingRedirect oldVersion="0.0.0.0-4.1.4.0" newVersion="4.1.4.0" />

      </dependentAssembly>

      <dependentAssembly>

        <assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />

        <bindingRedirect oldVersion="0.0.0.0-4.0.6.0" newVersion="4.0.6.0" />

      </dependentAssembly>

      <dependentAssembly>

        <assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />

        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0" />

      </dependentAssembly>

      <dependentAssembly>

        <assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral" />

        <bindingRedirect oldVersion="0.0.0.0-4.0.1.1" newVersion="4.0.1.1" />

      </dependentAssembly>

    </assemblyBinding>

  </runtime>
</configuration>
